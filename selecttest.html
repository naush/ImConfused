<html>
  <head>
    <link rel="stylesheet" type="text/css" href="confused.css" media="all">
    <script type="text/javascript" src="jquery-1.4.2.min.js"></script>
    <script type="text/javascript">
      function getSelect() {
        var selection = document.getSelection();
        
        var range = selection.getRangeAt(0);
        var startOffset = range.startOffset;
        var endOffset = range.endOffset;
        alert(startOffset);
        alert(endOffset);
        var text = selection.anchorNode.data;

        localStorage.setItem("highlight1", text.substring(startOffset, endOffset));

        var newnode = document.createElement("span");
        range.surroundContents(newnode);

        return selection;
      }

      function printTextarea() {
        var myText = $('#text1').val().toString();
        $('#printout').text(myText);
      }
    </script>
  </head>
<body >

<input onMouseUp="getSelect()" type="button" value="Confused">
<textarea id="text1" rows="10" cols="80"> hi </textarea>
<input  onMouseUp="printTextarea()" type="button" value="Write Me">
<p id="printout"> test</p>

</body>
</html>